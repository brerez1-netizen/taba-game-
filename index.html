<script>
  // ... (הגדרות Firebase ו-initBoard נשארות זהות) ...

  function listenGame() {
    db.ref('game').on('value', s => {
      const g = s.val();
      if(g.activeCell) {
        showStatutoryModal(g.activeCell, g.selection);
      } else {
        closeModal();
      }
    });
  }

  function showStatutoryModal(num, selection) {
    const data = gameData[num];
    const body = document.getElementById('modalBody');
    let optionsHtml = "";
    
    if(data.options) {
      optionsHtml = `<div class="options-grid">` + 
        data.options.map((opt, i) => {
          let style = "";
          if(selection === i) {
            style = (i === data.correct) ? "background:var(--green); border-color:white;" : "background:var(--red); border-color:white;";
          }
          return `<div class="opt-box" style="${style}">${String.fromCharCode(65 + i)}. ${opt}</div>`;
        }).join('') + `</div>`;
    }

    body.innerHTML = `
      <h2 style="color:var(--gold);">שלב ${num}: ${data.title}</h2>
      <div class="modal-info">${data.info}</div>
      <div class="modal-more">${data.more || ""}</div>
      <div class="modal-question"><b>השאלה:</b> ${data.question}</div>
      ${optionsHtml}
    `;
    document.getElementById('infoModal').style.display = 'flex';
  }
</script>
